# 통계 대시보드 페이지 통합 구현 계획

## 개요

통계 대시보드 페이지(`/stats`)의 최종 통합 작업을 수행합니다. 모든 컴포넌트가 이미 통합되어 있으나, 에러 처리 개선(재시도 버튼 추가), 네비게이션 링크 확인, 최종 페이지 검증을 진행합니다.

## 현재 상태 확인

### 이미 완료된 항목
- ✅ `app/stats/page.tsx`에 모든 컴포넌트 통합
  - ✅ 통계 요약 카드 (상단) - `StatsSummary` 컴포넌트
  - ✅ 지역별 분포 차트 (중단) - `RegionChartWithSuspense` 컴포넌트
  - ✅ 타입별 분포 차트 (하단) - `TypeChartWithSuspense` 컴포넌트
- ✅ 네비게이션에 통계 페이지 링크 추가 (`components/Navbar.tsx` 118-122줄)

### 추가 작업 필요
- ⚠️ 에러 처리 개선 (재시도 버튼 추가)
- ⚠️ 최종 페이지 확인 및 검증

## 구현 단계

### 1. 에러 처리 개선 (재시도 버튼 추가)

#### 1.1 공통 에러 컴포넌트 생성
- `components/stats/error-message.tsx` 생성
  - 에러 메시지 표시
  - 재시도 버튼 포함
  - 재시도 시 페이지 새로고침 또는 데이터 재요청
  - 재사용 가능한 컴포넌트로 설계

#### 1.2 각 컴포넌트에 재시도 기능 추가
- `components/stats/stats-summary.tsx` 수정
  - 에러 발생 시 `ErrorMessage` 컴포넌트 사용
  - 재시도 버튼 클릭 시 데이터 재요청
- `components/stats/region-chart.tsx` 수정
  - 에러 발생 시 `ErrorMessage` 컴포넌트 사용
  - 재시도 버튼 클릭 시 데이터 재요청
- `components/stats/type-chart.tsx` 수정
  - 에러 발생 시 `ErrorMessage` 컴포넌트 사용
  - 재시도 버튼 클릭 시 데이터 재요청

#### 1.3 재시도 로직 구현
- Client Component에서 재시도 처리
- `router.refresh()` 또는 `window.location.reload()` 사용
- 또는 상태 관리로 데이터 재요청

### 2. 네비게이션 링크 확인

#### 2.1 현재 상태 확인
- `components/Navbar.tsx`에 통계 링크가 이미 존재하는지 확인
- 링크가 활성화되어 있는지 확인
- 현재 페이지일 때 하이라이트 표시 여부 확인

#### 2.2 필요 시 개선
- 현재 페이지일 때 활성 스타일 적용 (선택 사항)
- 모바일 네비게이션에도 통계 링크 추가 확인 (선택 사항)

### 3. 최종 페이지 확인

#### 3.1 레이아웃 검증
- 모든 섹션이 올바른 순서로 배치되어 있는지 확인
- 반응형 디자인이 올바르게 작동하는지 확인
- 모바일/태블릿/데스크톱에서 레이아웃 확인

#### 3.2 기능 검증
- 통계 요약 카드가 정상적으로 표시되는지 확인
- 지역별 분포 차트가 정상적으로 표시되는지 확인
- 타입별 분포 차트가 정상적으로 표시되는지 확인
- 각 차트의 인터랙션(클릭, 호버)이 작동하는지 확인

#### 3.3 로딩 상태 검증
- 각 컴포넌트의 Skeleton UI가 올바르게 표시되는지 확인
- Suspense 경계가 올바르게 설정되어 있는지 확인

#### 3.4 에러 처리 검증
- 에러 발생 시 에러 메시지가 표시되는지 확인
- 재시도 버튼이 작동하는지 확인

#### 3.5 접근성 검증
- ARIA 라벨이 올바르게 적용되어 있는지 확인
- 키보드 네비게이션이 작동하는지 확인
- 스크린 리더 지원 확인

#### 3.6 성능 검증
- 페이지 로딩 시간 확인
- 차트 렌더링 성능 확인
- 데이터 캐싱이 올바르게 작동하는지 확인

## 파일 구조

```
components/stats/
  ├── error-message.tsx          # 공통 에러 메시지 컴포넌트 (새로 생성)
  ├── stats-summary.tsx          # 통계 요약 카드 (수정)
  ├── region-chart.tsx           # 지역별 차트 (수정)
  └── type-chart.tsx             # 타입별 차트 (수정)

components/
  └── Navbar.tsx                 # 네비게이션 (확인만, 수정 불필요)

app/stats/
  └── page.tsx                   # 통계 페이지 (확인만, 수정 불필요)
```

## 기술 스택

- **Next.js**: Server Component, Suspense
- **React**: 에러 처리, 상태 관리
- **shadcn/ui**: Button 컴포넌트 (재시도 버튼)
- **Tailwind CSS**: 스타일링

## 참고 파일

- `components/stats/stats-summary.tsx`: 현재 에러 처리 구조
- `components/stats/region-chart.tsx`: 현재 에러 처리 구조
- `components/stats/type-chart.tsx`: 현재 에러 처리 구조
- `components/Navbar.tsx`: 네비게이션 링크 확인
- `app/stats/page.tsx`: 페이지 레이아웃 확인

## 특별 고려사항

1. **재시도 로직**: 
   - Server Component에서는 `router.refresh()` 사용
   - Client Component에서는 상태 관리 또는 페이지 새로고침
   - 재시도 시 사용자에게 피드백 제공 (로딩 상태)

2. **에러 메시지**: 
   - 사용자 친화적인 메시지 표시
   - 기술적인 에러는 개발 환경에서만 표시
   - 재시도 버튼은 명확하게 표시

3. **네비게이션**: 
   - 통계 링크가 이미 존재하므로 확인만 수행
   - 필요 시 활성 상태 스타일 추가

4. **최종 확인**: 
   - 모든 기능이 정상 작동하는지 확인
   - 반응형 디자인 확인
   - 접근성 확인
   - 성능 확인

## 테스트 체크리스트

- [ ] 에러 발생 시 에러 메시지가 표시되는지 확인
- [ ] 재시도 버튼이 표시되고 작동하는지 확인
- [ ] 재시도 시 데이터가 올바르게 다시 로드되는지 확인
- [ ] 네비게이션에 통계 링크가 존재하는지 확인
- [ ] 통계 페이지에서 모든 컴포넌트가 올바르게 표시되는지 확인
- [ ] 모바일/태블릿/데스크톱에서 레이아웃이 올바른지 확인
- [ ] 로딩 상태가 올바르게 표시되는지 확인
- [ ] 각 차트의 인터랙션이 작동하는지 확인
- [ ] 접근성이 올바르게 적용되어 있는지 확인
- [ ] 페이지 성능이 양호한지 확인

