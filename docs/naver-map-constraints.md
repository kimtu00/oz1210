# 네이버 지도 API 제약사항 문서

## 사용량 제한

### 월간 무료 할당량
- **기본 할당량**: 월 10,000,000건 무료
- **초과 시**: 유료 과금 (네이버 클라우드 플랫폼 정책에 따름)
- **모니터링**: 개발 환경에서 `window.__naverMapMetrics` 사용

### 측정 도구
개발 환경에서 브라우저 콘솔에서 다음 명령어로 확인 가능:
```javascript
// 모든 메트릭 조회
window.__naverMapMetrics.getAll()

// 최근 10개 메트릭 조회
window.__naverMapMetrics.getRecent(10)

// 평균 로딩 시간 조회
window.__naverMapMetrics.getAverageLoadTime()

// 총 마커 생성 횟수
window.__naverMapMetrics.getTotalMarkerCreations()

// 요약 로그 출력
window.__naverMapMetrics.logSummary()
```

## API 파라미터

### ncpKeyId (필수)
- **파라미터명**: `ncpKeyId` (구 `ncpClientId` 아님)
- **설정 위치**: 환경변수 `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID`
- **검증**: 개발 환경에서 자동 검증 (형식 및 길이 확인)
- **에러**: 키가 없거나 형식이 잘못된 경우 콘솔 경고 출력

### API URL 형식
```
https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId={YOUR_KEY_ID}
```

## 좌표 변환

### KATEC → WGS84 변환
- **공식**: `WGS84 = KATEC / 10,000,000`
- **검증 범위**:
  - 경도 (KATEC): 1,240,000,000 ~ 1,320,000,000
  - 위도 (KATEC): 330,000,000 ~ 430,000,000
  - 경도 (WGS84): 124 ~ 132
  - 위도 (WGS84): 33 ~ 43

### 검증 도구
개발 환경에서 좌표 변환 정확성을 자동으로 검증합니다:
- 유효하지 않은 좌표 감지 시 콘솔 경고 출력
- 좌표 범위를 벗어난 경우 에러 메시지 표시

## 성능

### 목표
- **지도 초기 로딩**: < 3초
- **마커 생성**: < 100ms per marker
- **지도 이동/줌**: 즉시 반응

### 측정 항목
- 지도 로딩 시간
- 마커 생성 횟수
- 지도 이동/줌 이벤트 횟수

### 느린 로딩 경고
개발 환경에서 지도 로딩이 3초 이상 걸리면 자동으로 경고 메시지 출력

## 모니터링

### 개발 환경
- 모든 지도 관련 액션 자동 수집
- 5분마다 요약 로그 자동 출력
- 느린 로딩 경고 (3초 이상)
- 좌표 변환 정확성 자동 검증

### 프로덕션 환경
- 메트릭 수집 비활성화 (성능 최적화)
- 에러 로그만 최소한으로 기록

## 주의사항

1. **월간 할당량 초과 방지**: 사용량을 주기적으로 모니터링
2. **좌표 변환 정확성**: 한국 지역 좌표만 유효
3. **API 키 보안**: 클라이언트 사이드에 노출되므로 도메인 제한 설정 권장
4. **지도 로딩 최적화**: 필요한 경우에만 지도 로드 (lazy loading)


