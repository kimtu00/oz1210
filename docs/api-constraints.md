# 한국관광공사 API 제약사항 문서

## Rate Limit

### 일일 조회 한도
- **기본 한도**: API 키별로 다름 (일반적으로 1,000 ~ 10,000건/일)
- **에러 코드**: "04" - 일일 조회 한도를 초과했습니다
- **대응 방안**:
  - API 호출 횟수 모니터링 (개발 환경에서 `window.__apiMetrics` 사용)
  - 캐싱 전략 활용 (Next.js revalidate 설정)
  - 에러 발생 시 사용자에게 안내 메시지 표시

### 동시 요청 제한
- **제한**: 없음 (단, 과도한 요청 시 일시적으로 차단될 수 있음)
- **권장**: 동시 요청 수를 제한하여 안정성 확보

## 응답 속도

### 목표
- **초기 페이지 로딩**: < 3초
- **필터/검색 변경**: < 2초
- **API 응답 시간**: 평균 1-3초 (네트워크 상태에 따라 다름)

### 측정 도구
개발 환경에서 브라우저 콘솔에서 다음 명령어로 확인 가능:
```javascript
// 모든 메트릭 조회
window.__apiMetrics.getAll()

// 최근 10개 메트릭 조회
window.__apiMetrics.getRecent(10)

// 평균 응답 시간 조회
window.__apiMetrics.getAverageDuration()

// 특정 엔드포인트의 평균 응답 시간
window.__apiMetrics.getAverageDuration('/areaBasedList2')

// 에러율 조회
window.__apiMetrics.getErrorRate()

// 요약 로그 출력
window.__apiMetrics.logSummary()
```

## 데이터 품질

### 일반적인 이슈
1. **이미지 누락**: 일부 관광지에 이미지가 없을 수 있음
2. **주소 누락**: 매우 드물지만 주소 정보가 없는 경우가 있음
3. **좌표 누락/오류**: 좌표 정보가 없거나 잘못된 경우

### 품질 점수
- **계산 방식**: 이미지(20점) + 주소(30점) + 좌표(50점) = 100점 만점
- **개발 환경**: 콘솔에 자동으로 품질 점수 및 이슈 로그 출력

### 대응 방안
- 이미지 누락: 기본 이미지 표시 (MapPin 아이콘)
- 주소 누락: "주소 정보 없음" 표시
- 좌표 누락/오류: 지도에 마커 표시하지 않음

## 에러 응답 처리

### HTTP 상태 코드
- **400**: 잘못된 요청 - 파라미터 확인 필요
- **401**: 인증 실패 - API 키 확인 필요
- **403**: 접근 거부
- **404**: 리소스를 찾을 수 없음
- **500+**: 서버 오류 - 재시도 권장

### API 에러 코드
- **0000**: 정상
- **01**: 필수 파라미터 누락
- **02**: 잘못된 파라미터 값
- **03**: 서비스 접근 거부
- **04**: 일일 조회 한도 초과
- **05**: 서비스 점검 중

### 재시도 전략
- **최대 재시도 횟수**: 3회
- **재시도 지연**: Exponential backoff (1초, 2초, 4초)
- **타임아웃**: 10초
- **재시도 대상**: 네트워크 에러, 타임아웃 에러만 재시도

## 모니터링

### 개발 환경
- API 호출 메트릭 자동 수집
- 5분마다 요약 로그 자동 출력
- 느린 호출 경고 (3초 이상)
- 데이터 품질 이슈 자동 감지 및 로깅

### 프로덕션 환경
- 메트릭 수집 비활성화 (성능 최적화)
- 에러 로그만 최소한으로 기록


